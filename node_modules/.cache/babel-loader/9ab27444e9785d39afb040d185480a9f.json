{"ast":null,"code":"var _jsxFileName = \"/home/rails/parking_app/src/Components/ParkingCharges/ParkingCharges.tsx\";\nimport React, { Component } from 'react';\nimport WithRouter from '../../Router';\nimport { connect } from 'react-redux';\nimport { updateParkingData } from '../ParkingSlots /ParkingSlice';\nimport { Grid, Button, Typography } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ParkingCharges extends Component {\n  constructor(props) {\n    super(props);\n    this.carousel = null;\n\n    this.componentDidMount = () => {\n      let slotData = this.state.slotData;\n      let currentTime = new Date().getTime();\n      let totalHrs = Math.abs(Math.floor((currentTime - slotData.time) / (1000 * 60 * 60)));\n      let totalCharges = 0;\n\n      if (totalHrs <= 2) {\n        totalCharges = 10;\n      } else {\n        totalCharges = 10 + 10 * (totalHrs - 2);\n      }\n\n      this.setState({\n        totalHrs: totalHrs,\n        totalCharges: totalCharges\n      });\n    };\n\n    this.componentWillUnmount = () => {};\n\n    this.onBack = () => {\n      this.props.navigate(-1);\n    };\n\n    this.onExitCarRegistration = async () => {\n      let availableParkingArea = JSON.parse(JSON.stringify(this.props.parkingData));\n      let availableIndex = availableParkingArea.findIndex(carItem => carItem.uniqueNo === this.state.slotData.uniqueNo);\n      availableParkingArea[availableIndex]['isAvailable'] = true;\n      this.props.updateParkingData(availableParkingArea);\n      const response = await fetch('https://httpstat.us/200', {\n        method: \"POST\",\n        headers: {\n          'Content-Type': 'application/json',\n          Accept: 'application/json'\n        },\n        body: JSON.stringify(this.props.parkingData)\n      });\n      alert('Payment Done.');\n      this.props.navigate(-1);\n    };\n\n    this.state = {\n      slotData: this.props.location.state.slotData,\n      totalCharges: 0,\n      totalHrs: 0\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      style: {\n        padding: \"10%\",\n        gap: \"10px\"\n      },\n      direction: \"column\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        style: {\n          border: \"2px solid black\",\n          padding: \"5%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          children: [\"Car Registration No: \", this.state.slotData.carRegistrationNo]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          id: \"deregister-time-spent\",\n          variant: \"h6\",\n          children: [\"Total Time: \", this.state.totalHrs, \" hrs.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          id: \"deregister-charge\",\n          variant: \"h6\",\n          children: [\"Total Price : $ \", this.state.totalCharges]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            id: \"deregister-back-button\",\n            onClick: () => this.onBack(),\n            variant: \"contained\",\n            color: \"primary\",\n            children: \"Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            style: {\n              marginLeft: \"20px\"\n            },\n            variant: \"contained\",\n            color: \"primary\",\n            \"data-testid\": \"deregister-payment-button\",\n            onClick: () => this.onExitCarRegistration(),\n            children: \"Payment Taken\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\n;\n\nconst mapStateToProps = state => ({\n  parkingData: state.parking.parkingData\n});\n\nconst mapDispatchToProps = {\n  updateParkingData: updateParkingData\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(WithRouter(ParkingCharges));\nexport { ParkingCharges };","map":{"version":3,"names":["React","Component","WithRouter","connect","updateParkingData","Grid","Button","Typography","ParkingCharges","constructor","props","carousel","componentDidMount","slotData","state","currentTime","Date","getTime","totalHrs","Math","abs","floor","time","totalCharges","setState","componentWillUnmount","onBack","navigate","onExitCarRegistration","availableParkingArea","JSON","parse","stringify","parkingData","availableIndex","findIndex","carItem","uniqueNo","response","fetch","method","headers","Accept","body","alert","location","render","padding","gap","border","carRegistrationNo","marginLeft","mapStateToProps","parking","mapDispatchToProps"],"sources":["/home/rails/parking_app/src/Components/ParkingCharges/ParkingCharges.tsx"],"sourcesContent":["import React, { Component} from 'react';\nimport WithRouter from '../../Router';\nimport { connect } from 'react-redux';\nimport { updateParkingData } from '../ParkingSlots /ParkingSlice';\nimport {Grid , Button , Typography }  from '@mui/material';\n\n\n\n\nexport interface Props {\n    navigate:  any;\n    id: string;\n    location: any;\n    updateParkingData: (parkingData: any) => void;\n    parkingData: Array<any>;\n}\n\ninterface S {\n    slotData: any;\n    totalHrs: number;\n    totalCharges: number;\n}\n\ninterface SS {\n    id: any;\n}\n\nclass ParkingCharges extends Component<Props, S, SS> {\n    carousel: any = null;\n    constructor(props: any) {\n        super(props);\n        this.state = {\n            slotData: this.props.location.state.slotData,\n            totalCharges: 0,\n            totalHrs: 0, \n        };\n    };\n\n    componentDidMount = () => {\n        let slotData = this.state.slotData;\n        let currentTime = new Date().getTime();\n        let totalHrs = Math.abs(Math.floor((currentTime - slotData.time)/(1000 * 60*60)));\n        let totalCharges = 0;\n        if(totalHrs <= 2) {\n            totalCharges = 10;\n        } else {\n            totalCharges = 10 + 10 * (totalHrs - 2);\n        }\n        this.setState({ totalHrs: totalHrs, totalCharges: totalCharges });\n    }\n\n    componentWillUnmount = () => {\n\n    }\n    \n    onBack = () => {\n        this.props.navigate(-1)\n    }\n\n    onExitCarRegistration = async () => {\n        let availableParkingArea = JSON.parse(JSON.stringify(this.props.parkingData));\n        let availableIndex = availableParkingArea.findIndex((carItem: any) => carItem.uniqueNo === this.state.slotData.uniqueNo);\n        availableParkingArea[availableIndex]['isAvailable'] = true;\n        this.props.updateParkingData(availableParkingArea);\n        const response = await fetch('https://httpstat.us/200', {\n            method : \"POST\",\n            headers: {\n              'Content-Type': 'application/json',\n              Accept: 'application/json',\n            },\n            body : JSON.stringify(this.props.parkingData)\n          })\n        alert('Payment Done.')\n        this.props.navigate(-1);\n    }\n\n \n    render() {\n        return (\n            <Grid container style = {{padding : \"10%\" , gap : \"10px\" }} direction= \"column\" justifyContent=\"center\" alignItems=\"center\"  >\n                <Grid style = {{border : \"2px solid black\", padding : \"5%\"}}>\n                <Typography variant='h6'>Car Registration No: {this.state.slotData.carRegistrationNo}</Typography>\n                <Typography id = 'deregister-time-spent' variant='h6'>Total Time: {this.state.totalHrs} hrs.</Typography>\n                <Typography id = 'deregister-charge' variant='h6'>Total Price : $ {this.state.totalCharges}</Typography>\n                <hr/>\n                <Grid >\n                <Button  id = 'deregister-back-button' onClick={() => this.onBack()}  variant=\"contained\" color=\"primary\" >Back</Button>\n                <Button style = {{marginLeft : \"20px\"}}  variant=\"contained\" color=\"primary\"  data-testid=\"deregister-payment-button\" onClick={() => this.onExitCarRegistration()}>Payment Taken</Button>\n                </Grid>\n                </Grid>\n            </Grid>\n        )\n    }\n};\n\nconst mapStateToProps = (state: any) => ({\n    parkingData: state.parking.parkingData\n});\n\nconst mapDispatchToProps = {\n    updateParkingData: updateParkingData\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WithRouter(ParkingCharges));\nexport {ParkingCharges};"],"mappings":"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"},"metadata":{},"sourceType":"module"}